(()=>{"use strict";const e=document.querySelector("[data-lists]"),t=document.querySelector("[data-new-list-form]"),n=document.querySelector("[data-new-list-input]"),l=document.querySelector("[data-delete-list-button]"),a=document.querySelector("[data-list-display-container"),o=document.querySelector("[data-list-title]"),s=document.getElementById("myModal"),d=document.getElementById("myBtn"),i=document.getElementsByClassName("close")[0],c=document.querySelector("[data-new-task-form]"),r=document.querySelector("[data-new-task-input]"),u=document.querySelector("#due-date"),m=document.querySelector("#priority"),p=document.querySelector("#description"),y=document.querySelector("[data-tasks]"),k=document.querySelector("[data-clear-complete-tasks-button]"),f=document.getElementById("task-template"),g=document.querySelector("[data-list-count]"),S="task.lists",v="task.selectedListId";let q=JSON.parse(localStorage.getItem(S))||[],h=localStorage.getItem(v);const E=()=>{b(),w()};e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(h=e.target.dataset.listId,E())})),t.addEventListener("submit",(e=>{e.preventDefault();const t=n.value;if(null==t||""===t)return;const l=(a=t,{id:Date.now().toString(),name:a,tasks:[]});var a;n.value=null,q.push(l),E()})),y.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=q.find((e=>e.id===h));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,b(),C(t)}})),l.addEventListener("click",(e=>{q=q.filter((e=>e.id!==h)),h=null,E()})),d.onclick=function(){s.style.display="block"},i.onclick=function(){s.style.display="none"},window.onclick=function(e){e.target==s&&(s.style.display="none")},c.addEventListener("submit",(e=>{e.preventDefault();const t=r.value;if(null===t||""===t)return;const n=L();r.value=null,q.find((e=>e.id===h)).tasks.push(n),E()}));const L=()=>({id:Date.now().toString(),name:r.value,date:u.value,priority:m.value,description:p.value,complete:!1});k.addEventListener("click",(e=>{const t=q.find((e=>e.id===h));t.tasks=t.tasks.filter((e=>!e.complete)),E()}));const b=()=>{localStorage.setItem(S,JSON.stringify(q)),localStorage.setItem(v,h)},w=()=>{N(e),I();const t=q.find((e=>e.id===h));null==h?a.style.display="none":(a.style.display="",o.innerText=t.name,C(t),N(y),x(t),function(e){const t=[...document.querySelectorAll(".task")],n=[...document.querySelectorAll(".custom-checkbox")];for(let l=0;l<t.length;l++)for(let t=0;t<e.tasks.length;t++)"High"===e.tasks[t].priority?n[t].style.border="2px solid #ed1250":"Medium"===e.tasks[t].priority?n[t].style.border="2px solid #d3d00f":n[t].style.border="2px solid #0fc53d"}(t))},I=()=>{q.forEach((t=>{const n=document.createElement("li");n.dataset.listId=t.id,n.classList.add("list-name"),n.innerText=t.name,t.id===h&&n.classList.add("active-list"),e.appendChild(n)}))},C=e=>{const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";g.innerText=`${t} ${n} remaining`},x=e=>{e.tasks.forEach((e=>{const t=document.importNode(f.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const l=t.querySelector("label");l.htmlFor=e.id;const a=document.createElement("br");l.append(e.name,", ",e.date,a,e.description);const o=document.createElement("span");o.innerHTML='<i class="fa fa-edit"></i>',o.classList.add("editing-button"),o.addEventListener("click",(()=>{alert("poppimg")})),t.querySelector(".task").append(o),y.appendChild(t)}))},N=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};w()()})();