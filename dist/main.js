(()=>{"use strict";const t=document.querySelector("[data-lists]"),e=document.querySelector("[data-new-list-form]"),n=document.querySelector("[data-new-list-input]"),a=document.querySelector("[data-delete-list-button]"),l=document.querySelector("[data-list-display-container"),i=document.querySelector("[data-list-count]"),s=document.querySelector("[data-tasks]"),o=document.querySelector("[data-list-title]"),d=document.querySelector("[task-template]"),c="task.lists",r="task.selectedListId";let u=JSON.parse(localStorage.getItem(c))||[],m=localStorage.getItem(r);function p(){localStorage.setItem(c,JSON.stringify(u)),localStorage.setItem(r,m),S()}function S(){f(t),u.forEach((e=>{const n=document.createElement("li");n.dataset.listId=e.id,n.classList.add("list-name"),n.innerText=e.name,e.id===m&&n.classList.add("active-list"),t.appendChild(n)}));const e=u.find((t=>t.id===m));null==m?l.style.display="none":(l.style.display="",o.innerText=e.name,function(t){const e=t.tasks.filter((t=>!t.complete)).length,n=1===e?"task":"tasks";i.innerText=`${e} ${n} remaining`}(e),f(s),function(t){t.task.forEach((t=>{const e=document.importNode(d.textContent,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),s.appendChild(e)}))}(e))}function f(t){for(;t.firstChild;)t.removeChild(t.firstChild)}t.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(m=t.target.dataset.listId,p())})),e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null==e||""===e)return;const a=(l=e,{id:Date.now().toString(),name:l,tasks:[]});var l;n.value=null,u.push(a),p()})),a.addEventListener("click",(t=>{u=u.filter((t=>t.id!==m)),m=null,p()})),S()()})();