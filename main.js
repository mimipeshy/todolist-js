(()=>{"use strict";const t=class{static getProjects(){let t=[{title:"Default",todos:[]}];return localStorage.getItem("todoApp")||localStorage.setItem("todoApp",JSON.stringify(t)),t=JSON.parse(localStorage.getItem("todoApp")),t}static saveProject(t){const e=JSON.parse(localStorage.getItem("todoApp"));e.push(t),localStorage.setItem("todoApp",JSON.stringify(e))}static removeProject(t){const e=JSON.parse(localStorage.getItem("todoApp")),i=document.querySelector(".todos-container"),o=e.findIndex((e=>e.title===t));e.splice(o,1),localStorage.setItem("todoApp",JSON.stringify(e)),i.innerHTML="Project deleted, please choose other project"}static getTodos(t){return this.getProjects()[t].todos}static saveTodo(t,e){const i=this.getProjects();i[e].todos.push(t),localStorage.setItem("todoApp",JSON.stringify(i))}static removeTodo(t,e){const i=this.getProjects();i[t].todos.splice(e,1),localStorage.setItem("todoApp",JSON.stringify(i))}static modifyTodo(t,e,...i){const o=this.getProjects(),n=[...i];o[t].todos[e]={title:`${n[0]}`,priority:`${n[1]}`,due:`${n[2]}`,done:n[3]},localStorage.setItem("todoApp",JSON.stringify(o))}},e=document.querySelector(".todos-container"),i=t=>{const e=document.querySelectorAll(".project-container");e.forEach((t=>t.classList.remove("current"))),e[t].classList.add("current")},o=(o=0)=>{const n=t.getTodos(o);if(e.innerHTML="",i(o),n.length>0)n.forEach(((t,i)=>{const o=new s(t.title,t.due,t.priority,i,t.done);e.appendChild(o.div)}));else{const t=document.createElement("div");t.textContent="Empty Todo List",e.appendChild(t)}},n=()=>{document.querySelectorAll(".project-title").forEach((t=>{t.addEventListener("click",(()=>{const e=t.parentElement.getAttribute("data-index");-1!==e&&(i(e),o(e))}))}))};class d{constructor(t,e,i){this.title=t,this.due=e,this.priority=i,this.done=!1}}class s{constructor(t,e,i,o,n){this.title=t,this.due=e,this.priority=i,this.index=o,this.done=n,this.div=document.createElement("div"),this.priorityDiv=document.createElement("div"),this.titleDiv=document.createElement("div"),this.dueDiv=document.createElement("div"),this.checkButton=document.createElement("button"),this.modifyButton=document.createElement("button"),this.deleteButton=document.createElement("button"),this.div.classList.add("todo-container"),this.priorityDiv.classList.add("priority-display"),this.titleDiv.classList.add("title-display"),this.dueDiv.classList.add("due-display"),this.checkButton.classList.add("btn","finish-btn"),this.modifyButton.classList.add("btn","modify-btn"),this.deleteButton.classList.add("btn","delet-btn"),this.done?this.div.classList.add("done"):this.div.classList.remove("done"),this.priorityDiv.textContent=i,this.titleDiv.textContent=t,this.dueDiv.textContent=e,this.checkButton.textContent="Check",this.modifyButton.textContent="Modify",this.deleteButton.textContent="Delete",this.div.setAttribute("data-index",o),this.checkButton.onclick=this.onClickCheck.bind(this),this.modifyButton.onclick=this.onClickModify.bind(this),this.deleteButton.onclick=this.onClickDelete.bind(this),this.div.appendChild(this.priorityDiv),this.div.appendChild(this.titleDiv),this.div.appendChild(this.dueDiv),this.div.appendChild(this.checkButton),this.div.appendChild(this.modifyButton),this.div.appendChild(this.deleteButton)}onClickCheck(){const e=document.querySelector(".todos-container");let i;document.querySelectorAll(".project-container").forEach((t=>{t.classList.contains("current")&&(i=t.getAttribute("data-index"))}));const o=t.getTodos(i)[this.index];t.modifyTodo(i,this.index,o.title,o.priority,o.due,!o.done),o.done?e.querySelector(`[data-index='${this.index}']`).classList.remove("done"):e.querySelector(`[data-index='${this.index}']`).classList.add("done")}onClickModify(){const e=document.querySelectorAll(".project-container"),i=document.querySelector(".popup-display-container");let n;if(e.forEach((t=>{t.classList.contains("current")&&(n=t.getAttribute("data-index"))})),c(),r(),!l)return;const d=document.querySelector(".input-form"),s=document.getElementById("title"),a=document.getElementById("date"),u=document.getElementById("priority"),p=t.getTodos(n)[this.index];s.value=p.title,a.value=p.due,u.value=p.priority,d.addEventListener("submit",(e=>{e.preventDefault(),t.modifyTodo(n,this.index,s.value,u.value,a.value,p.done),o(n),i.innerHTML=""}))}onClickDelete(){const e=document.querySelector(".todo-display-container");let i;document.querySelectorAll(".project-container").forEach((t=>{t.classList.contains("current")&&(i=t.getAttribute("data-index"))})),t.removeTodo(i,this.index),e.querySelector(`[data-index='${this.index}']`).remove()}}const c=()=>{document.querySelector(".popup-display-container").innerHTML='\n        <div class="add-container">\n            <h2>New Todo</h2>\n            <div class="close-btn">X</div>\n            <form class="input-form">\n                <div class="input-container">\n                    <label for="title" class="input-label">Todo:</label>\n                    <input type="text" name="title" class="input" id="title" required/>\n                </div>\n\n                <div class="input-container">\n                    <label for="date" class="input-label">Due:</label>\n                    <input type="date" name="date" id="date" class="input" required />\n                </div>\n                <input type="date" id="due-date" name="due-date" required /><br />\n                <div class="input-container">\n                    <label for="priority" class="input-label">Priority:</label>\n                    <select class="input" name="priority" id="priority">\n                        <option class="input" value="high">High</option>\n                        <option class="input" value="medium">Medium</option>\n                        <option class="input" value="low">Low</option>\n                    </select>\n                </div>\n\n                <button class="add-btn" id="add-todo" role="add-todo">Add New</button>\n            </form>\n        </div>\n    '},l=()=>!!document.getElementById("title").value.trim(),r=()=>{const t=document.querySelector(".close-btn"),e=document.querySelector(".popup-display-container");t.addEventListener("click",(()=>{e.innerHTML=""}))};class a{constructor(t,e=[]){this.title=t,this.todos=e}}class u{constructor(t,e){this.title=t,this.index=e,this.div=document.createElement("div"),this.h3=document.createElement("h3"),this.deleteButton=document.createElement("button"),this.div.classList.add("project-container"),this.h3.classList.add("project-title"),this.deleteButton.classList.add("btn","project-delet-btn"),this.div.setAttribute("data-index",e),this.h3.textContent=t,this.deleteButton.textContent="Delete",this.deleteButton.onclick=this.onClickDelete.bind(this),this.div.appendChild(this.h3),this.div.appendChild(this.deleteButton)}onClickDelete(){const e=document.querySelector(".project-display-container");t.getProjects().length>1&&(t.removeProject(this.title),e.querySelector(`[data-index='${this.index}']`).remove())}}const p=document.getElementById("project-add-form");t.getProjects(),document.querySelector(".add-todo-btn").addEventListener("click",(()=>{c(),(()=>{const e=document.querySelector(".input-form"),i=document.getElementById("title"),n=document.getElementById("date"),s=document.getElementById("priority"),c=document.querySelectorAll(".project-container"),r=document.querySelector(".popup-display-container");let a;e.addEventListener("submit",(e=>{if(e.preventDefault(),c.forEach((t=>{t.classList.contains("current")&&(a=t.getAttribute("data-index"))})),l()){const e=new d(i.value.trim(),n.value,s.value);t.saveTodo(e,a),o(a),r.innerHTML=""}}))})(),r()})),p.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".project-display-container"),i=document.getElementById("project-add").value.trim(),o=t.getProjects().length,d=new a(i),s=new u(i,o);t.saveProject(d),e.appendChild(s.div),n(),document.getElementById("project-add").value=""})()})),(()=>{const e=document.querySelector(".project-display-container");t.getProjects().forEach(((t,i)=>{const o=new u(t.title,i);e.appendChild(o.div)}))})(),o(),n()})();