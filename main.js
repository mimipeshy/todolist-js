(()=>{"use strict";const e=document.querySelector("[data-lists]"),t=document.querySelector("[data-new-list-form]"),n=document.querySelector("[data-new-list-input]"),a=document.querySelector("[data-delete-list-button]"),l=document.querySelector("[data-list-display-container"),d=document.querySelector("[data-list-title]"),i=document.getElementById("myModal"),s=document.getElementById("myBtn"),o=document.getElementsByClassName("close")[0],c=document.querySelector("[data-new-task-form]"),r=document.querySelector("[data-new-task-input]"),u=document.querySelector("#due-date"),m=document.querySelector("#priority"),p=document.querySelector("#description"),y=document.querySelector("[data-tasks]"),k=document.querySelector("[data-clear-complete-tasks-button]"),f=document.getElementById("task-template"),S=document.querySelector("[data-list-count]"),g="task.lists",v="task.selectedListId";let q=JSON.parse(localStorage.getItem(g))||[],E=localStorage.getItem(v);const L=()=>{w(),I()};e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(E=e.target.dataset.listId,L())})),t.addEventListener("submit",(e=>{e.preventDefault();const t=n.value;if(null==t||""===t)return;const a=(l=t,{id:Date.now().toString(),name:l,tasks:[]});var l;n.value=null,q.push(a),L()})),y.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=q.find((e=>e.id===E));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,w(),b(t)}})),a.addEventListener("click",(e=>{q=q.filter((e=>e.id!==E)),E=null,L()})),s.onclick=function(){i.style.display="block"},o.onclick=function(){i.style.display="none"},window.onclick=function(e){e.target==i&&(i.style.display="none")},c.addEventListener("submit",(e=>{e.preventDefault();const t=r.value;if(null===t||""===t)return;const n=h();r.value=null,q.find((e=>e.id===E)).tasks.push(n),L()}));const h=()=>({id:Date.now().toString(),name:r.value,date:u.value,priority:m.value,description:p.value,complete:!1});k.addEventListener("click",(e=>{const t=q.find((e=>e.id===E));t.tasks=t.tasks.filter((e=>!e.complete)),L()}));const w=()=>{localStorage.setItem(g,JSON.stringify(q)),localStorage.setItem(v,E)},I=()=>{B(e),C();const t=q.find((e=>e.id===E));null==E?l.style.display="none":(l.style.display="",d.innerText=t.name,b(t),B(y),N(t))},C=()=>{q.forEach((t=>{const n=document.createElement("li");n.dataset.listId=t.id,n.classList.add("list-name"),n.innerText=t.name,t.id===E&&n.classList.add("active-list"),e.appendChild(n)}))},b=e=>{const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";S.innerText=`${t} ${n} remaining`},N=e=>{e.tasks.forEach((e=>{const t=document.importNode(f.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const a=t.querySelector("label");a.htmlFor=e.id;const l=document.createElement("br");a.append(e.name,", ",e.date,", ",e.priority,", ",l,e.description);const d=document.createElement("p");d.innerHTML='<i class="far fa-edit"></i>',d.classList.add("edit"),d.addEventListener("click",(()=>editTask(e,a))),t.querySelector(".task").append(d),a.append(e.name),y.appendChild(t)}))},B=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};I()()})();